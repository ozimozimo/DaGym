<!doctype html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      data-layout-decorate="~{layout/default}">
<head>
    <title>boardSelect</title>
    <script th:src="@{/js/board.js}" ></script>

    <style>
        ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }
        li{
            margin: 0 0 0 0;
            padding: 0 0 0 0;
            border: 0;
            float: left;
        }
    </style>
</head>
<div layout:fragment="content">

    <form th:action="@{/board}" method="get" id="searchForm">
        <div>
            <input type="hidden" name="page" value="1">
            <select name="type">
                <option th:selected="${PageRequestDto.type == null}"></option>
                <option value="t" th:selected="${PageRequestDto.type == 't'}">제목</option>
                <option value="c" th:selected="${PageRequestDto.type == 'c'}">내용</option>
                <option value="u" th:selected="${PageRequestDto.type == 'u'}">작성자</option>
                <option value="tc" th:selected="${PageRequestDto.type == 'tc'}">제목+내용</option>
            </select>
        </div>
        <input name="keyword" th:value="${PageRequestDto.keyword}">
        <div>
            <button type="button" onclick="search()">검색</button>
            <button type="button" onclick="Sclear()">초기화</button>
        </div>

    </form>

    <table class="table table-horizontal table-bordered">
        <thead class="thead-strong">
        <tr>
            <th>번호</th>
            <th>제목</th>
            <th>등록인</th>
            <th>조회수</th>
            <th>최종수정일</th>
        </tr>
        </thead>
        <tbody id="tbody">
        <tr th:each="board : ${result.dtoList}">
            <td th:text="${board.id}"></td>
<!--            <td th:text="${board.title}"><a th:href="@{/board/trainerBoard/update/{id}(id = ${session.loginUser})}" th:if="${session.loginUser == null}" ></a></td>-->
            <td>
                <a th:href="@{/board/trainerBoard/detail(hb_num = ${board.id},
                                        page=${PageRequestDto.page},
                                        type=${PageRequestDto.type},
                                        keyword=${PageRequestDto.keyword})}" th:text="${board.title}"></a>
            </td>
            <td th:text="${board.user_id}"></td>
            <td th:text="${board.hit}"></td>
            <td th:text="${#temporals.format(board.modifiedDate, 'yyyy/MM/dd HH:mm:ss')}"></td>
        </tr>
        </tbody>
    </table>
    <a th:href="@{/board/trainerBoard/save(member_id = ${session.loginUser})}" th:if="${session.loginUser != null}" class="btn btn-secondary">글쓰기</a>

    <ul>
        <li th:if="${result.prev}">
            <a th:href="@{/board(page = ${result.start -1},
                                        type=${PageRequestDto.type},
                                        keyword=${PageRequestDto.keyword})}">이전</a>
        </li>
        <li th:each="page: ${result.pageList}">
            <a th:href="@{/board(page= ${page},
                                        type=${PageRequestDto.type},
                                        keyword=${PageRequestDto.keyword})}" th:text="${page}">
            </a>
        </li>
        <li th:if="${result.next}">
            <a th:href="@{/board(page = ${result.end +1},
                                        type=${PageRequestDto.type},
                                        keyword=${PageRequestDto.keyword})}">다음</a>
        </li>
    </ul>

    <script th:inline="javascript">

        var searchForm = $('#searchForm');

        function search() {
            searchForm.submit();
        }
        function Sclear() {
            searchForm.empty().submit();
        }

    </script>
</div>


</html>