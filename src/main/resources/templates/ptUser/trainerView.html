<!DOCTYPE html>
<html
        lang="ko"
        xmlns:th="http://www.thymeleaf.org"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        data-layout-decorate="~{layout/default}"
>
<head>
    <script th:src="@{/js/trainer.js?ver=1.0}"></script>
    <link rel="stylesheet" th:href="@{/css/userView.css}"/>
</head>
<body>
<div layout:fragment="content">

    <input type="hidden" id="role" th:value="${session.loginRole}">
    <!--    로그인한 유저롤이 트레이너일 때-->
    <div th:if="${session.loginRole == 'trainer'}">
        <input type="hidden" th:value="${session.loginUser}" id="member_id">
        <div>
            <div>
                <h1>받은 신청</h1>
                <div>
                    <table class="table table-striped applyList">
                        <thead>
                        <tr>
                            <th>회원아이디</th>
                            <th>회원이름</th>
                            <th>연락처</th>
                            <th>나이</th>
                            <th>성별</th>
                            <th>키</th>
                            <th>몸무게</th>
                            <th>상세보기</th>
                        </tr>
                        </thead>
                        <tbody class="applyListDetail">

                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>


    <!-- 로그인한 유저롤이 유저일 때-->
    <div th:if="${session.loginRole == 'user'} ">
        <h2>트레이너 찾기</h2>
        <h1 th:text="${session.loginId}" class="loginId" style="display: none"></h1>
        <input type="hidden" th:value="${session.loginUser}" class="loginUserId"/>
        <!--트레이너 검색-->
        <form th:action="@{/ptUser/view}" method="get" id="searchForm">
            <div class="input-group">
                <input type="hidden" name="page" value="1">
                <div class="input-group-prepend">
                    <select class="custom-select" name="type">
                        <option th:selected="${pageRequestDto.type == null}"></option>
                        <option value="n" th:selected="${pageRequestDto.type == 'n'}">이름</option>
                        <option value="g" th:selected="${pageRequestDto.type == 'g'}">헬스장이름</option>
                        <option value="c" th:selected="${pageRequestDto.type == 'c'}">운동목적</option>
                        <option value="ki" th:selected="${pageRequestDto.type == 'ki'}">SNS</option>
                        <option value="p" th:selected="${pageRequestDto.type == 'p'}">경력사항</option>
                        <option value="ngc" th:selected="${pageRequestDto.type == 'ngc'}">이름+헬스장이름+운동목적</option>
                    </select>
                </div>
                <input class="form-control" name="keyword" th:value="${pageRequestDto.keyword}">
                <div class="input-group-append" id="button-addon4">
                    <button class="btn btn-outline-secondary" onclick="search()" type="button">검색</button>
                    <button class="btn btn-outline-secondary" onclick="Sclear()" type="button">Clear</button>
                </div>
            </div>
        </form>



        <div class="user_view">
            <h5>트레이너 검색 결과</h5>
            <table class="table table-striped">
                <thead>
                <tr>
                    <th>프로필 이미지</th>
                    <th>트레이너 아이디</th>
                    <th>이름</th>
                    <th>휴대폰 번호</th>
                    <th>헬스장 이름</th>
                    <th>카카오톡 아이디</th>
                    <th>인스타그램 아이디</th>
                    <th>신청</th>
                    <th>상세보기</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="trainer : ${result.dtoList}">
                    <td><img class="trainer_image" width="200px" height="200px" th:src="@{/display(fileName=${trainer.imgName})}"></td>
                    <td th:text="${trainer.user_id}">아이디</td>
                    <td th:text="${trainer.user_name}">이름</td>
                    <td th:text="${trainer.user_pn}">폰번호</td>
                    <td th:text="${trainer.trainer_gymName}">헬스장이름</td>
                    <td th:text="${trainer.trainer_kakao}">카카오톡</td>
                    <td th:text="${trainer.trainer_instagram}">Instagram</td>
                    <!--                            <td th:text="${member.address_normal}+'('+${member.address_detail}+')'"></td>-->
                    <td>
                        <a
                                th:href="@{~/ptUser/apply(member_id = ${session.loginUser},
                                                            trainer_id = ${trainer.id})}"
                                th:text="PT신청"

                        >신청</a>
<!--                        onclick="check()"-->
                    </td>
                    <td>
                        <a
                                th:href="@{~/ptUser/detail(id=${trainer.id},
                                        page = ${pageRequestDto.page},
                                        type=${pageRequestDto.type},
                                        keyword=${pageRequestDto.keyword})}"
                                        th:text="상세보기"
                        >상세보기</a>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="pagination_area">
        <ul>
            <li th:if="${result.prev}">
                <a class="custom_btn" th:href="@{/ptUser/view(page = ${result.start -1},
                                        type=${pageRequestDto.type},
                                        keyword=${pageRequestDto.keyword})}">이전</a>
            </li>
            <li th:each="page: ${result.pageList}">
                <a class="custom_btn" th:href="@{/ptUser/view(page= ${page},
                                        type=${pageRequestDto.type},
                                        keyword=${pageRequestDto.keyword})}" th:text="${page}">1</a>
            </li>
            <li th:if="${result.next}">
                <a class="custom_btn" th:href="@{/ptUser/view(page = ${result.end +1},
                                        type=${pageRequestDto.type},
                                        keyword=${pageRequestDto.keyword})}">다음</a>
            </li>
        </ul>
    </div>


    <script th:inline="javascript">

        var searchForm = $('#searchForm');

        function search() {
            searchForm.submit();
        }

        function Sclear() {
            searchForm.empty().submit();

        }
    </script>
</div>
</body>
</html>